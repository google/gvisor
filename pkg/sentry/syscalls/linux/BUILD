package(licenses = ["notice"])  # Apache 2.0

load("//tools/go_stateify:defs.bzl", "go_library", "go_stateify")

go_stateify(
    name = "linux_state",
    srcs = [
        "sys_aio.go",
        "sys_futex.go",
        "sys_poll.go",
        "sys_time.go",
    ],
    out = "linux_state.go",
    package = "linux",
)

go_library(
    name = "linux",
    srcs = [
        "error.go",
        "flags.go",
        "linux64.go",
        "linux_state.go",
        "sigset.go",
        "sys_aio.go",
        "sys_capability.go",
        "sys_epoll.go",
        "sys_eventfd.go",
        "sys_file.go",
        "sys_futex.go",
        "sys_getdents.go",
        "sys_identity.go",
        "sys_inotify.go",
        "sys_lseek.go",
        "sys_mmap.go",
        "sys_mount.go",
        "sys_pipe.go",
        "sys_poll.go",
        "sys_prctl.go",
        "sys_random.go",
        "sys_read.go",
        "sys_rlimit.go",
        "sys_rusage.go",
        "sys_sched.go",
        "sys_sem.go",
        "sys_shm.go",
        "sys_signal.go",
        "sys_socket.go",
        "sys_stat.go",
        "sys_sync.go",
        "sys_sysinfo.go",
        "sys_syslog.go",
        "sys_thread.go",
        "sys_time.go",
        "sys_timer.go",
        "sys_timerfd.go",
        "sys_tls.go",
        "sys_utsname.go",
        "sys_write.go",
        "timespec.go",
    ],
    importpath = "gvisor.googlesource.com/gvisor/pkg/sentry/syscalls/linux",
    visibility = ["//:sandbox"],
    deps = [
        "//pkg/abi",
        "//pkg/abi/linux",
        "//pkg/binary",
        "//pkg/bpf",
        "//pkg/eventchannel",
        "//pkg/log",
        "//pkg/metric",
        "//pkg/rand",
        "//pkg/sentry/arch",
        "//pkg/sentry/context",
        "//pkg/sentry/fs",
        "//pkg/sentry/fs/anon",
        "//pkg/sentry/fs/fsutil",
        "//pkg/sentry/fs/lock",
        "//pkg/sentry/fs/timerfd",
        "//pkg/sentry/kernel",
        "//pkg/sentry/kernel/auth",
        "//pkg/sentry/kernel/epoll",
        "//pkg/sentry/kernel/eventfd",
        "//pkg/sentry/kernel/fasync",
        "//pkg/sentry/kernel/kdefs",
        "//pkg/sentry/kernel/pipe",
        "//pkg/sentry/kernel/sched",
        "//pkg/sentry/kernel/semaphore",
        "//pkg/sentry/kernel/shm",
        "//pkg/sentry/kernel/time",
        "//pkg/sentry/limits",
        "//pkg/sentry/memmap",
        "//pkg/sentry/mm",
        "//pkg/sentry/safemem",
        "//pkg/sentry/socket",
        "//pkg/sentry/socket/control",
        "//pkg/sentry/syscalls",
        "//pkg/sentry/usage",
        "//pkg/sentry/usermem",
        "//pkg/state",
        "//pkg/syserr",
        "//pkg/syserror",
        "//pkg/tcpip/transport/unix",
        "//pkg/waiter",
    ],
)
